<!DOCTYPE html>
<html>
<head>
	<title>On Global and Radical Homesickness</title>
	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="idle-timer.min.js"></script>
	<script>
		$.holdReady(true);
		$(window).bind('load',function(){
			$.holdReady(false);
		});

		$(document).idleTimer(10000);
		$(document).on("idle.idleTimer", function(){
			pageTimer.stop();
		});
		
		$(document).on("active.idleTimer",function(){
			pageTimer.start();
		});

		var dataSent = false;


		var currentChromosome;
		var currentCssChromosome;
		var currentNeededFonts;
		var googleFontList;

		var documentLoader = new loader();
		var pageTimer = new timer();

		//INITIAL AND SOCKET CONNECTION
		//*****************************
		var socket = io.connect('http://localhost:8080');
		socket.on('initialChromosome', function(data){
			if(!documentLoader.isLoaded("genomeLoaded")) {
				$.event.trigger({
					type: "newChromosome",
					chromosome: data
				});
			}
		});

		//EVENT LISTENERS
		//***************
		$(document).on("newChromosome", function(e){
			console.log("newChromosome");
			currentChromosome = e.chromosome;
			$.event.trigger({
				type: "paramLoaded",
				param: "genomeLoaded"
			});
		});

		$(document).on("genomeLoaded", function(){
			populateGenomeBox();
		});
		$(document).on("GoogleFontListLoaded", function(){
			console.log("Google Font List Loaded");

		});

		$(document).on("requestTranscribe", function(){
			console.log("Requesting Transcription");
			t = new chromosomeTranscriber(currentChromosome.chromosome);
			t.transcribe();
		});

		$(document).on("genomeTranscribed", function(){
			console.log("Genome Transcribed");
			loadGoogleFonts(currentNeededFonts);
		});

		$(document).on("GoogleFontsLoaded", function(){
			console.log("GoogleFontsLoaded");
			doCss(currentCssChromosome);
		});

		$(document).on("paramLoaded", function(e){
			documentLoader.setParamLoaded(e.param);
		});
		$(document).on("loaderFinished", function(){
			//$.holdReady(false);
		})


		//TIMER
		//*****
		function timer() {
			var storedTime;
			var startTime;
			var endTime;

			var running = false;

			this.start = function() {
				if(! storedTime) {
					d = new Date();
					startTime = d.getTime();
					running = true;
				} else {
					d = new Date();
					now = d.getTime();
					startTime = now - storedTime;
					running = true;
				}
			}

			this.stop = function() {
				if(running) {
					d = new Date();
					now = d.getTime();
					elapsed = now - startTime;
					storedTime = elapsed;
					running = false;
					return elapsed;
				} else {
					return storedTime;
				}
			}

			this.reset = function() {
				storedTime = 0;
				startTime = 0;
				endTime = 0;
				running = false;
			}

		};

		//LOADER
		//******

		function loader(){
			var topBinding = this;
			this.params = {
				GoogleFontListLoaded: false,
				GoogleFontsLoaded: false,
				genomeLoaded: false,
				genomeTranscribed: false,
				contentFilled: true,
				cssApplied: false
			}

			if(googleFontList) { this.params["GoogleFontsLoaded"]=true };

			this.setParamLoaded = function(param) {
				this.params[param] = true;

				$.event.trigger({
					type: param
				});

				triggerSweep();

				if(allLoaded()) {
					$.event.trigger({
						type: 'loaderFinished'
					});
				}
			};

			this.unsetParamLoaded = function(param) {
				this.params[param] = false;
			};

			this.isLoaded = function(param) {
				return this.params[param]
			}

			function allLoaded () {
				test = true;
				for(param in this.params) {
					test = test && this.params[param];
				}
				return test;
			}

			function triggerSweep() {
				if((topBinding.params["GoogleFontListLoaded"] && topBinding.params["genomeLoaded"]) && ( ! topBinding.params["genomeTranscribed"])) {
					$.event.trigger({
						type: "requestTranscribe"
					});
				}
			};

			//things to initialize here
			loadGoogleFontList();
		};

		//GENE MAPPING
		//************
		function gene(geneString) {
			mainBinding = this;
			this.gene = geneString;
			this.map = {};
			this.cssTranscription = {};

			function transcribe(){ return; };
		};

		function textGene(gene, selector, length) {

			binding = this;
			this.gene = gene;
			this.geneLen = parseInt(length,10);					
			this.cssTranscription = {};
			this.neededFont = "";
			this.selector = selector;

			var selector = this.selector;

			var map = {
				TYP:	{start: 1, len: 3, callback: function(FFF){
							
							//set typeface
							var raw = parseInt(FFF,16);

							var numFonts = googleFontList.items.length;
							var val = raw % numFonts - 1;

							var name = googleFontList.items[val].family;
							
							if(name) {
								binding.neededFont = name;
								//console.log(binding.neededFont);

								binding.cssTranscription["font-family"]=name;
							}

						}},
				STY: 	{start: 4, len: 1, callback: function(F){
							//set style
							var val = parseInt(F,16);

							switch(val) {
								case 0:
									//$(selector).css({"font-style":"normal"});

									binding.cssTranscription["font-style"] = "normal";
									break;
								case 1:
									//$(selector).css({"font-style":"normal"});

									binding.cssTranscription["font-style"]="normal";
									break;
								case 2:
									//$(selector).css({"font-style":"normal"});

									binding.cssTranscription["font-style"]="normal";
									break;
								case 3:
									//$(selector).css({"font-style":"normal"});
									binding.cssTranscription["font-style"]="normal";
									break;
								case 4:
									//$(selector).css({"font-style":"normal"});
									binding.cssTranscription["font-style"]="normal";
									break;
								case 5:
									//$(selector).css({"font-style":"italic"});
									binding.cssTranscription["font-style"]="italic";
									break;
								case 6:
									//$(selector).css({"font-style":"normal"});
									binding.cssTranscription["font-style"]="normal";
									break;
								case 7:
									//$(selector).css({"font-style":"italic"});
									binding.cssTranscription["font-style"]="italic";
									break;
								case 8:
									//$(selector).css({"font-style":"normal"});
									binding.cssTranscription["font-style"]="normal";
									break;
								case 9:
									//$(selector).css({"font-style":"normal"});
									binding.cssTranscription["font-style"]="normal";
									break;
								case 10:
									//$(selector).css({"font-weight":"bold"});
									binding.cssTranscription["font-weight"]="bold";
									break;
								case 11:
									//$(selector).css({"font-style":"italic","font-weight":"bold"});
									binding.cssTranscription["font-style"]="italic";
									binding.cssTranscription["font-weight"]="bold";
									break;
								case 12:
									//$(selector).css({"font-style":"normal"});
									binding.cssTranscription["font-style"]="normal";
									break;
								case 13:
									//$(selector).css({"font-style":"italic"});
									binding.cssTranscription["font-style"]="italic";
									break;
								case 14:
									//$(selector).css({"font-weight":"bold"});
									binding.cssTranscription["font-weight"]="bold";
									break;
								case 15:
									//$(selector).css({"font-style":"italic","font-weight":"bold"});
									binding.cssTranscription["font-style"]="italic";
									binding.cssTranscription["font-weight"]="bold";
									break;
							}
						}},
				CAS:	{start: 5, len: 1, callback: function(F){
							//set case
							var bits = parseInt(F, 16).toString(2);

							while (bits.length < 4) {
								bits = "0" + bits;
							}


							var first2 = parseInt(bits.substring(0,2),2);
							var last2 = parseInt(bits.substring(2,4),2);
							var val = first2 & last2;

							switch(val) {
								case 0:
									//$(selector).css({"text-transform":"none"});
									binding.cssTranscription["text-transform"]="none";
									break;
								case 1:
									//$(selector).css({"text-transform":"lowercase"});
									binding.cssTranscription["text-transform"]="lowercase";
									break;
								case 2:
									//$(selector).css({"text-transform":"uppercase"});
									binding.cssTranscription["text-transform"]="uppercase";
									break;
								case 3:
									//$(selector).css({"text-transform":"none"});
									binding.cssTranscription["text-transform"]="none";
							}


						}},
				ALI:	{start: 6, len: 1, callback: function(F){
							//set alignment
							var val = parseInt(F,16);

							switch(val) {
								case 0:
									//$(selector).css({"text-align": "right"});
									binding.cssTranscription["text-align"]="right";
									break;
								case 1:
									//$(selector).css({"text-align": "left"});
									binding.cssTranscription["text-align"]="left";
									break;
								case 2:
									//$(selector).css({"text-align": "center"});
									binding.cssTranscription["text-align"]="center";
									break;
								case 3:
									//$(selector).css({"text-align":"justify", "text-align-last": "left"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="left";
									break;
								case 4:
									//$(selector).css({"text-align":"justify", "text-align-last":"right"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="right";
									break;
								case 5:
									//$(selector).css({"text-align":"justify", "text-align-last":"left"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="left";
									break;
								case 6:
									//$(selector).css({"text-align":"justify", "text-align-last":"left"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="left";
									break;
								case 7:
									//$(selector).css({"text-align": "justify", "text-align-last":"justify"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="justify";
									break;
								case 8:
									//$(selector).css({"text-align": "center"});
									binding.cssTranscription["text-align"]="center";
									break;
								case 9:
									//$(selector).css({"text-align": "justify", "text-align-last":"left"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="left";
									break;
								case 10:
									//$(selector).css({"text-align": "justify", "text-align-last":"justify"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="justify";
									break;
								case 11:
									//$(selector).css({"text-align": "justify", "text-align-last":"right"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="right";
									break;
								case 12:
									//$(selector).css({"text-align": "justify", "text-align-last":"left"});
									binding.cssTranscription["text-indent"]="justify";
									binding.cssTranscription["text-align-last"]="left";
									break;
								case 13:
									//$(selector).css({"text-align": "justify", "text-align-last":"justify"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="justify";
									break;
								case 14:
									//$(selector).css({"text-align": "justify", "text-align-last":"justify"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="justify";
									break;
								case 15:
									//$(selector).css({"text-align": "justify", "text-align-last":"center"});
									binding.cssTranscription["text-align"]="justify";
									binding.cssTranscription["text-align-last"]="center";
									break;
							}
						}},
				DEC:	{start: 7, len: 1, callback: function(F){
							//set decoration
							var bits = parseInt(F,16).toString(2);

							while (bits.length < 4) {
								bits = "0" + bits;
							}

							var first2 = bits.substring(0,2);
							var last2 = bits.substring(2,4);
							var val = parseInt(first2,2) & parseInt(last2,2);

							switch(val) {
								case 0:
									//$(selector).css({"text-decoration":"none"});
									binding.cssTranscription["text-decoration"]="none";
									break;
								case 1:
									//$(selector).css({"text-decoration": "underline"});
									binding.cssTranscription["text-decoration"]="underline";
									break;
								case 2:
									//$(selector).css({"text-decoration": "overline"});
									binding.cssTranscription["text-decoration"]="overline";
									break;
								case 3:
									//$(selector).css({"text-decoration": "linethrough"});
									binding.cssTranscription["text-decoration"]="linethrough";
									break;
							}
						}},
				SIZ:	{start: 8, len: 2, callback: function(FF){
							//set size
							size = parseInt(FF,16);
							//$(selector).css({"font-size": size + "pt"});
							binding.cssTranscription["font-size"]=size + "pt";
						}},
				LDG:	{start: 10, len: 2, callback: function(FF){
							//set leading (signed)
							var raw = parseInt(FF,16);
							var val;
							if(raw > 128) {
								val = - (raw - 128);
							} else {
								val = raw;
							}
							//$(selector).css({"line-height": val + "pt"});
							binding.cssTranscription["line-height"]=val + "pt";
						}},
				BUL:	{start: 12, len: 1, callback: function(F){
							//set bullet
							var raw = parseInt(F,16);
							if(raw = 15) {
								//$(selector).css({"list-style-type": "square"});
								binding.cssTranscription["list-style-type"]="square";
							}
						}},
				IN1:	{start: 13, len: 2, callback: function(FF){
							//set 1st line indent (signed)
							var raw = parseInt(FF,16);
							var val;
							if(raw > 128) {
								val = - (raw - 128);
							} else {
								val = raw;
							}
							//$(selector).css({"text-indent":val+"pt"});
							binding.cssTranscription["text-indent"]=val + "pt";
						}},
				INO: 	{start: 15, len: 2, callback: function(FF){
							//set other line indent (signed)
							var raw = parseInt(FF,16);
							var val;
							if(raw > 128) {
								val = - (raw - 128);
							} else {
								val = raw;
							}
							//$(selector).css({"padding-left":val+"pt"});
							binding.cssTranscription["padding-left"]=val + "pt";
						}},
				SPB: 	{start: 17, len: 2, callback: function(FF){
							//set space before (signed)
							var raw = parseInt(FF,16);
							var val;
							if(raw > 128) {
								val = - (raw - 128);
							} else {
								val = raw;
							}
							//$(selector).css({"margin-top":val+"pt"});
							binding.cssTranscription["margin-top"]=val + "pt";
						}},
				SPA: 	{start: 19, len: 2, callback: function(FF){
							//set space after (signed)
							var raw = parseInt(FF,16);
							var val;
							if(raw > 128) {
								val = - (raw - 128);
							} else {
								val = raw;
							}
							//$(selector).css({"margin-bottom":val+"pt"});
							binding.cssTranscription["margin-bottom"]=val + "pt";
						}},
				SPL: 	{start: 21, len: 2, callback: function(FF){
							//set space left (signed)
							var raw = parseInt(FF,16);
							var val;
							if(raw > 128) {
								val = - (raw - 128);
							} else {
								val = raw;
							}
							//$(selector).css({"margin-left":val+"pt"});
							binding.cssTranscription["margin-left"] = val + "pt";
						}},
				SPR:	{start: 23, len: 2, callback: function(FF){
							//set space right (signed)
							var raw = parseInt(FF,16);
							var val;
							if(raw > 128) {
								val = - (raw - 128);
							} else {
								val = raw;
							}
							//$(selector).css({"margin-right":val+"pt"});
							binding.cssTranscription["margin-right"]= val + "pt";
						}},
				FGC:	{start: 25, len: 6, callback: function(FFFFFF){
							//set foreground color
							//$(selector).css({color: "#"+FFFFFF});
							binding.cssTranscription["color"] = "#" + FFFFFF;
						}},
				BGC: {start: 31, len: 6, callback: function(FFFFFF){
							//set background color
							//$(selector).css({"background-color": "#" + FFFFFF});
							binding.cssTranscription["background-color"] = "#" + FFFFFF;
					}}
				};

			this.transcribe = function() {

				for(readpoint in map) {
					var start = map[readpoint].start - 1;
					var length = map[readpoint].len;
					var callback = map[readpoint].callback;
					var string = gene.substring(start,start+length);
					callback(string);
				};

			}
		};

		function paragraphGene(gene) {
			this.cssTranscription = {};

			this.transcribe = function() {
				return;
			}
		}

		function mainGenome(gene) {
			mainBinding = this;
			this.gene = gene;

			this.cssTranscription = {};
			this.neededFonts = new Array();

			this.map = {
			DIR: {start: 1, len: 1, callback: function(F){
					//set read direction
					}},
			WID: {start: 2, len: 2, callback: function(FF){
					//column width
						widthVar = (parseInt(FF, 16)/256)*100;
						widthStr = "'" + widthVar + "%'";

						//$('.column').css({width: widthStr});
						mainBinding.cssTranscription[".column"] = {width: "'" + widthVar + "'"};
					}},
			HGT: {start: 4, len: 2, callback: function(FF){
					//column height
					/*	height = (toDecimal(4_FF)/256)*100;
						heightStr = "'" + width + "%'";
						$('.column').css({height: heightStr});
					*/
					}},
			TXT: {start: 6, len: 36, callback: function(F36){
					//text
							g = new textGene(F36, ".text");
							g.transcribe()
							mainBinding.cssTranscription[".text"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
						}
					},
			EMP: {start: 42, len: 36, callback: function(F36){
					//emphasis
							g = new textGene(F36, "em, i");
							g.transcribe()
							mainBinding.cssTranscription["em, i"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			LNK: {start: 78, len: 36, callback: function(F36){
					//links
							g = new textGene(F36, "a:link, a:visited");
							g.transcribe()
							mainBinding.cssTranscription["a:link, a:visited"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			BIB: {start: 114, len: 36, callback: function(F36){
							g = new textGene(F36, ".bibliography");
							g.transcribe()
							mainBinding.cssTranscription[".bibliography"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			LST: {start: 150, len: 36, callback: function(F36){
					//lists
							g = new textGene(F36, ".list");
							g.transcribe()
							mainBinding.cssTranscription[".list"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			QUO: {start: 186, len: 36, callback: function(F36){
					//quotes
							g = new textGene(F36, ".quote");
							g.transcribe()
							mainBinding.cssTranscription[".quote"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			PAR: {start: 222, len: 36, callback: function(F36){
					//paragraph
							g = new paragraphGene(F36);
							g.transcribe()
							mainBinding.cssTranscription["p"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			HD1: {start: 258, len: 36, callback: function(F36){
					//heading1
							g = new textGene(F36, ".heading1");
							g.transcribe()
							mainBinding.cssTranscription[".heading1"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			HD2: {start: 294, len: 36, callback: function(F36){
					//heading2
							g = new textGene(F36, ".heading2");
							g.transcribe()
							mainBinding.cssTranscription[".heading2"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			TTL: {start: 330, len: 36, callback: function(F36){
					//title
							g = new textGene(F36, ".title");
							g.transcribe()
							mainBinding.cssTranscription[".title"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			AUT: {start: 366, len: 36, callback: function(F36){
					//author
							g = new textGene(F36, ".author");
							g.transcribe()
							mainBinding.cssTranscription[".author"] = g.cssTranscription;
							mainBinding.neededFonts.push(g.neededFont);
					}},
			BOD: {start: 115, len: 6, callback: function(F6){
					//body
							//$("body").css({"background-color":"#"+F6});
							mainBinding.cssTranscription["body"] = {"background-color":"#"+F6};
				}}
			};

			this.transcribe = function () {
				for(readpoint in mainBinding.map) {
					var start = mainBinding.map[readpoint].start - 1;
					var strLen = mainBinding.map[readpoint].len;

					var end = start + strLen;

					var callback = mainBinding.map[readpoint].callback;
					var string = mainBinding.gene.substring(start, end);
					//console.log(string);
					callback(string);
				}
			};
		};

		function chromosomeTranscriber(genetics) {
			if(!documentLoader.isLoaded("googleFontList")) { 
				loadGoogleFontList();
			};
			
			topBinding = this;
			this.genetics = genetics;

			this.transcribe = function() {
				mainG = new mainGenome(topBinding.genetics);
				mainG.transcribe();
				console.log(mainG.cssTranscription);
				currentCssChromosome = mainG.cssTranscription;
				currentNeededFonts = mainG.neededFonts;

				$.event.trigger({
					type: "paramLoaded",
					param: "genomeTranscribed"
				});
			};
		};

		function loadGoogleFontList() {
				$.getJSON("fonts.json",function(response){
					googleFontList = response;
					$.event.trigger({
						type: "paramLoaded",
						param: "GoogleFontListLoaded"
					});
				});
		};

		function loadGoogleFonts(familyNameArray) {
			var cleanArray = new Array()
			for (item in familyNameArray) {
				if(typeof(familyNameArray[item]) != "undefined") {
					cleanArray.push(familyNameArray[item]);
				}
			};

			//asynchronous loader
			WebFontConfig = {
				google: {families: cleanArray},
				fontactive: function(){
					$.event.trigger({
						type: "paramLoaded",
						param: "GoogleFontsLoaded"
					});
				}
			
			};
			(function() {
				var wf = document.createElement('script');
				wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
					'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
				wf.type = 'text/javascript';
				wf.async = 'true';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(wf, s);
		  	})();
		};

		function doCss(cssChromosome) {
			for (selector in cssChromosome) {
				$(selector).css(cssChromosome[selector]);
			}
			$.event.trigger({
				type: "cssApplied"
			});
		};


	</script>

	<script>
		function populateGenomeBox() {
			var chrom = currentChromosome.chromosome;
			first3 = chrom.substring(0,3);
			rest = chrom.substring(3,chrom.length);

			$("#generation").text(currentChromosome.generation);
			$("#individual").text(currentChromosome.individual);
			$(".md5").text(currentChromosome.md5);
			$(".Parent1").text(currentChromosome.parent1);
			$(".Parent2").text(currentChromosome.parent2);

			$("#box-container").append("<div class='box' style='background-color:#" + first3 + "'></div>");
			var i = 0;
			while (i < rest.length - 1) {
				var currentColor = rest.substring(i,i+6);
				var htmlString = "<div class='box' style='background-color:#" + currentColor + "'></div>";
				$("#box-container").append(htmlString);
				i = i+6;
			}
		}

		function sendDeath() {
			pageTime = pageTimer.stop();
			currentChromosome["time"] = pageTime;
			socket.emit('death',currentChromosome);
		}
	</script>

	<script>
	</script>

	<style>
	/*CSS FOR FLOATING BOX*/
		.md5 {
			font-size: 6px;
			font-weight: bold;
		}
		#genome-map {
			padding-left: 2px;
			padding-top: 3px;
			width: 120px;
			
		}
		#genome-info {
			margin-top: 5px;
			/* display: none; */
			font-family:"Courier New", Courier, monospace;
			font-size:12px;
			/*background-color: #FFF;*/
			margin-left: auto;
			margin-right: auto;
		}
		.floating-box {
			border: 1px solid #CCC;
			padding: 4px;
			width: 130px;
			background-color: rgba(255,255,255,.9);
			position: fixed;
			top: 5px;
			left: 5px;
			
		}
		.buttons {
			font-family:"Lucida Sans Unicode", "Lucida Grande", sans-serif;
			/*font-style:italic; */
			font-size: 14px;
			vertical-align:middle;
			color:#333;
			text-align: center;
		}
		.kill {
			font-weight: bold;
			cursor:crosshair;
		}
		.info {
			cursor: help;
		}
		.bottomtext {
			padding-left: 4px;
		}
		.about-ga {
			text-decoration: underline;
			margin: 0;
			margin-bottom: 5px;
		}
		.home {
			cursor: w-resize;
		}

		.box {
				width: 10px;
				height: 10px;
				float: left;
				margin: 0px;
				background-color: #CCC;
				/*border: 1px solid white;*/
			}
		.spacer {
			width: 93px;
			background-color: white;
		}
		.selected {
			border: 1px dashed white;
		}

	</style>
</head>
<body style="display: none">
<script>
	$(document).ready(function(){
		pageTimer.start();
		
		$(".info").click(function(){
			$("#genome-info").toggle();
		});

		$(".kill").click(function(){
			sendDeath();
			//$("html").fadeOut('slow');
			//setTimeout("location.reload()",650);
			location.reload();
		});

		$("body").delay(500).fadeIn('slow');
	});
	$(window).bind('beforeunload',function(){
		sendDeath();
	});
</script>

<!-- FLOATING BOX -->

<div class="floating-box">
<div class="buttons home">\\\\\ Home /////</div>
<hr>

<div class="info-container">
<div class="buttons info">::::::::::: Info :::::::::::</div>
<div id="genome-info">
<div id="genome-map">
<p class="about-ga">About the Project</p>
<div id="box-container">

</div>
</div>
<div class="bottomtext">
<p>&nbsp;</p>
<p>Generation <strong><span id="generation"></span></strong><br />
  Individual <strong><span id="individual"></span></strong><br />
  <span class="md5"></span><br />
  <!-- 
  Parent 1: <spam class="Parent1"></spam>
  Parent 2: <span class="Parent2"></span>
  -->
</p>
</div>
</div>
</div>
<hr>
<div class="buttons kill">.:.:.:.: KILL :.:.:.:.</div>
</div>

<!-- END FLOATING BOX -->


<!-- ARTICLE BODY -->

<div class="articlebody">
<div id="verticalcolumn" classs="column">
<h1 class="title">On Global and Radical Homesickness</h1>
<p class="author">Sean Scanlan </p>
<p class="text">What does globalization feel like? How does globalization affect our ability to make decisions? How does globalization affect our decisions to care for, or harm, others? The short answer is that globalization makes us feel homesick, and it does so in two interconnected ways that I call global and radical homesickness. Central to memory processes, global and radical homesickness are activated by the collision between present experiences and collective histories. Such a comparative clash has the power to help people adjudicate between colonial pasts and postmodern, global dislocations by resisting or welcoming changes to their family structure or home environment.</p>
<p class="text"> Far too often, best-selling macro studies of globalization forget the importance of individuals and their relationship to home. Consider some of the popular theories on globalization: Thomas Friedman on economics in his popular book <em>The World is Flat 3.0</em> (2007); Saskai Sassen on the importance of place in <em>Territory, Authority, Rights </em>(2008); and Manfred Steger on ideology and political history in <em>The Rise of the Global Imaginary </em>(2008). But for all these incisive and useful ideas on globalization, we remain less clear about how globalization affects us on an individual level. This may appear obvious, but it bears repeating: we (people on distant shores, my neighbors, you, and I) all make decisions that, when combined, effect global socio-economics. The relationship is reciprocal. Individuals alter globalization and this very process, in turn, shapes all social relations. Such reciprocity is seething and boiling; globalization is inescapable, and it is very uneven. </p>
<p class="text">
  One of the most useful shorthand definitions of globalization comes from Steger&rsquo;s <em>Globalization</em> (2009). He distinguishes &ldquo;globality,&rdquo; a social condition characterized by networks that make borders increasingly obsolete, from &ldquo;globalization,&rdquo; what is ultimately a process that &ldquo;is about shifting forms of human contact&rdquo; (8–9).  It is precisely the idea of &ldquo;human contact&rdquo; that I find appealing in Steger&rsquo;s definition, and it is an idea that is too often left out of discussions of globalization. Yes, there are winners in today&rsquo;s global economy, but isolation and despair are all too common. Adjusting to global environments—physical and psychological, hostile and banal—requires a new take on a very old tool: that is, reading stories of homesickness with careful attention to insecurity and tolerance. This tool will benefit from some refurbished definitions and the use of certain metaphors—the anchor and the root—as a way to describe two different types of homesickness that are ultimately two sides of the same global coin.</p>
<p class="text">
  Shifting marketplace agendas and national boundaries­—from reorganized international corporations to social media and big data—certainly unleashed both excitement and protest, but deep analyses of these changes have taken some time for scholars and critics to weave together. Why? Because globalization&rsquo;s changes are incomplete and shift the very structures of thought that can be used to examine increasingly unanticipated forces. Globalization exposes ironies: it promotes freedoms <em>and</em> insecurities, it leaves nothing untouched and no room for escape, yet it seems to allow for new and exhilarating unities by connecting disparate peoples. We can easily see how these characteristics could change our relationship with home and how we feel about home: whether or not a person has a stable home or is between several, each person has an idea of home that goes beyond bricks and mortar. As philosopher Martha Nussbaum says, we should not try to avoid emotions and feelings because they, in fact, &ldquo;shape the landscape of our mental and social lives&rdquo; (2001:1). Feelings for and about home help form the cornerstone of human experience. By examining these stories of homesickness, I hope to illuminate the ways in which globalization—a seemingly massive, and not particular, presence—can distinctly alter our individual lives.</p>
  
<h1 class="heading1">Global Homesickness</h1>

<p class="text">In a recent humorous piece from the <em>New Yorker</em> titled &ldquo;A Long Way Home&rdquo; (Sedaris 2013), David Sedaris writes about the anxieties associated with remaking one&rsquo;s home in a different country. During a trip to Hawaii, he is disheartened when somebody steals his computer bag, but then remembers that his American passport—the only official document that he owns—was also in the bag. This realization sends him into a panic, for included inside his passport was a special sticker reading &ldquo;Indefinite Leave to Remain,&rdquo; which allowed him to live in England permanently. This sticker granted him his dream of dual citizenship.</p>
<p class="text">Without the &ldquo;Indefinite Leave&rdquo; sticker, he is peeved to now be a mere &ldquo;visitor&rdquo; when he travels around Europe and reenters the UK. But then, when he applies for a new sticker, he feels unsettled by the prospect of having to give up his passport for a few months for processing. In effect, he will not have any official papers for a brief period of time, and will not be able to travel outside the UK. He bemoans his condition: &ldquo;without my passport, I [will be] stuck in the country I had immigrated to&rdquo; (31). This is supposed to be funny because he worked hard for the privilege to be trapped in another country. It was as if he had become an undocumented worker, but with much less at stake. Of course, Sedaris is part of the global elite whose very livelihood is predicated on soft international borders—many of his stories are about traveling to different corners of the globe.</p>

<p class="text">At the end of his story, while still awaiting his replacement sticker, Sedaris is confronted by national security: a security guard at the London airport is not compelled to allow him back into the UK. Sedaris&rsquo;s reaction encapsulates what I call global homesickness: &ldquo;I don&rsquo;t think I&rsquo;ve ever felt more foolish than I did at that moment,&rdquo; he writes. &ldquo;Who was I to feel at home in another country, to believe that filling out forms and scoring high marks on a test guaranteed me the same sense of belonging I take for granted in the United States?&rdquo; (30).</p>

<p class="text">Expanding on Sedaris&rsquo;s situation, we can begin to consider a type of homesickness that is, in a way, global. Sedaris&rsquo;s global homesickness is an imaginative feeling that is essentially comparative in nature: it fosters reflection on the meaning of the past and present, helps a person decide between inaction and change, and is essential to decision-making and identity reconfiguration. Global homesickness reflects typical ideas of homesickness: we miss some aspect of a home that is no longer available to us, whether a missing place or a previous self. More specifically, homesickness may be an idealization of the past, but it can also be a Janus-faced feeling for a past home that recruits memory, environment, and experience to aid a person in making a decision for the future. One feels homesick when the &ldquo;self,&rdquo; remembering the past home, collides with the &ldquo;self&rdquo; during a present moment of shock.</p>

<p class="text">What makes this feeling global is the feeling of loss of national, or even cultural, affiliations. It is not the sort of transcendental desire &ldquo;to be at home everywhere,&rdquo; or the desire for completeness and unity between &ldquo;world and self&rdquo; as described by Georg Lukács (1971:29). No such completeness exists in the rubric of today&rsquo;s globalization. It is, in fact, the opposite, a comparative feeling of being continually <em>between</em> national pasts and global futures. In other words, &ldquo;global homesickness&rdquo; is a type of longing that is connected to, and made possible by, the history of globalization and its recent technological developments. Individual identities are perpetually subservient to a system that in turn allows them a greater sense of agency, a greater number of choices, which are ultimately illusions of control over their own concept of self. Sedaris&rsquo;s example underscores a significant disconnect: his heightened sense of voluntary decision-making and claim to agency enable him to leave each new home with ease, but he also develops fewer deep community ties.</p>

<p class="text">I would like to borrow the metaphors of the &ldquo;anchor&rdquo; and the &ldquo;root&rdquo; from the sociologist Zygmunt Bauman (2008) to describe the feeling of global and radical homesickness: individuals like Sedaris may want to weigh anchor and drift until finding another, more compelling port to connect with temporarily. Once finding such a port, he then can drop anchor, knowing that he can move again without affecting the surrounding community. He does not want to uproot or transplant, which would require moving some soil and the root system. Global homesickness indicates dislocation and overconsumption, the price of which may be some unknown quantity of stability, or losing some established relationship(s) to home, neighborhood, region, and nation. The benefit of such a feeling is that it enables quick adjustment and frees one to invite others into one&rsquo;s home. In other words, it allows for the ability to understand more people—or to at least pretend. This relationship remains unequal, as globalization does not guarantee even distributions of power, and expanding one&rsquo;s own home may be a forceful intrusion into another&rsquo;s.</p>

<p class="text">One important problem that Sedaris must face is the insecurity that comes with relatively unlimited choice and freedom. A very small piece of paper in his passport formally represents his shifting sense of self, and when he loses it, he loses what allows him to pursue an alternate identity. His cosmopolitan desire to drift to new homes, to cut ties to civic and national duties, is an important part of how global homesickness operates. Accepting a &ldquo;rootless&rdquo; existence has real repercussions to one&rsquo;s identity, and with meager benefits. Sedaris shows us the danger and anxiety of losing one&rsquo;s stability and affiliations, yet he still retains the power to reclaim and rectify his own situation.</p>

<h1 class="heading1">Radical Homesickness</h1>
<p class="text">This brings us to my next example: what if Sedaris did not have this power? What if his story was about the impossibility of returning home? Not everyone can experience the advantages, and accompanying anxieties, of global homesickness. Powerful examples of the more destabilizing, terrifying emotions of what I call &ldquo;radical&rdquo; homesickness abound in personal narratives. Marjane Satrapi writes about her own unusual sort of homesickness in her graphic memoir <em>The Complete Persepolis</em> (2007), in which her family sends her to Vienna to attend a French school, cutting her off from her family and Iranian identity so that she may continue her secular education in a country that is not in the midst of revolution. Satrapi becomes confused by her conflicting desires to blend in with European culture and stay true to her roots.  Reflecting on how her identity was stretched to the breaking point, she says that &ldquo;the harder I tried to assimilate, the more I had the feeling that I was distancing myself from my culture, betraying my parents and my origins, that I was playing a game by somebody else&rsquo;s rules&rdquo; (193). Her narrative emphasizes the complex problems arising from displacement, ethnocentrism, and war—especially how these factors contort her idea of home. Even when Satrapi is rudely evicted from a friend&rsquo;s house and unfairly expelled from a boarding house because of her Iranian identity, she still feels that she must closely guard her heritage and her roots in order to survive.</p>

<p class="text">Satrapi&rsquo;s story and others like it display something very different from home-building and identity consolidation. Radical homesickness is instead a feeling that occurs when a person is exiled or barred from (re-)making their home, or when the very idea of home is attacked or destroyed. Satrapi does not easily adjust to her new home in Vienna. She becomes homeless, gets ill, and is eventually hospitalized. Once she is back in her family&rsquo;s home in Tehran, she cannot re-adjust to changes to her home and culture, and subsequently attempts to commit suicide. Radical homesickness is similar to global homesickness, and is fundamentally caused by similar trends, but self-harm and violence are crucial to its radicalness. It forces the recreation or destruction of a sense of self because consolidation is no longer possible, and has immediate (and often severe) consequences for individuals. It is the difference between merely relocating one&rsquo;s anchor and having one&rsquo;s roots forcibly cut.</p>

<p class="text">Consider the following refugee story that exemplifies what I would call radical homesickness. Although it takes place in an airport, it is drastically different from Sedaris&rsquo;s experience. In 1988, Merhan Karimi Nasseri, an Iranian exile, entered France without a passport—his papers were in his briefcase, which he says was stolen—and he was subsequently stuck in the Charles de Gaulle airport for nearly seventeen years. His story was immortalized in the Spielberg film <em>The Terminal </em>(2004), but his story was also made into books, short stories, an opera, and, in 2004, Nasseri published his autobiography, <em>The Terminal Man</em>. The airport&rsquo;s physician, Philippe Bargain, said that, after so many years, his move from the airport would be difficult: &ldquo;he will have to be weaned from the airport, like an addict really&rdquo; (Daley 1999). The word &ldquo;addict,&rdquo; although powerful, is wrong. Nasseri is not an addict, but rather, he is radically homesick. He was forced to remake himself and to survive in a liminal space that afforded minimal privacy or security. Against the odds, Nasseri put down roots in the airport, and the thought of leaving any established home, especially a home that he had to fight to secure for nearly seventeen years, can be profoundly difficult.</p>

<p class="text">Nasseri&rsquo;s case is so extraordinary because he was not a hostage, and not quite a refugee, yet he was immobilized and detained. Both entry into France or England (his goal), and a return to Belgium (his previous home), was barred. His Iranian roots made him unwanted due to Iran&rsquo;s political and ideological position on the global stage. Iran formally exiled him and his family cut all ties. His loss of papers eroded his sense of identity so much that he encouraged people to call him by a name that someone called him by mistake: Sir Alfred, Charles de Gaulle Airport.</p>

<p class="text">At the end of his autobiography, Nasseri (or Sir Alfred Merhan) reveals that his red bench in Terminal One had become a makeshift living room in which visitors, filmmakers, and interviewers would hold court with him. He accumulates many possessions, but his most important possessions are the many file boxes in which he keeps his journals and the documents of his many legal trials that pertain to his attempt to permanently settle in the UK. Readers of his memoir will likely be shocked to learn that Nasseri rejected the help of some officials who finally offered to give him the necessary papers that would give him his dream of legal citizenship. Near the end of his autobiography, he says: &ldquo;I know where I am. I am in Terminal One, Charles de Gaulle airport. Simple&rdquo; (Merhan 2004:239). Maybe we should not be shocked at his refusal. He is not lost, but instead built and established an unlikely, but viable, home.</p>

<p class="text">Policies (or the lack thereof) that erode the home as place of stability, harmony, and peace may be the most damaging facet of globalization. The housing crisis, foreclosure debacle, and gentrification problem must take their place as some of the world&rsquo;s most important crises. Politicians decry the fate of domestic jobs and outsourcing, but the stories of those who actually lose their jobs—and have much to say about globalization&rsquo;s repercussions—are all too often missing in contemporary popular discourse. The way people feel about their past homes, their future homes, their potential homelessness, and every feeling in between, gives us clues that have the potential to help us understand how to navigate the shifting patterns of globalization.</p>

<p class="text">Going further, the movement of people across borders compels us to understand that displacement changes how homes are made or destroyed. Displacement can alter the ways familial violence turns into terrorist violence. This is a call to investigate, share, and read those stories of displacement with the intention to decrease the violence it brings, so that the challenges and benefits of diversity can be better understood, even as the relentless and conflicting pressure increases to make national borders more porous for some, and more impenetrable for others.</p>

<h1 class="heading1">Radical Homesickness and Violence</h1>

<p class="text">It is too early to say what was going through the minds and hearts of the Tsarnaev brothers. It may have been a combination of radical and global homesickness that opened the door to their decisions, or it may have been other thoughts. Their family had the ability to travel between Dagestan and the US, and not only were they related to doctors and lawyers, but the brothers&rsquo; father, Anzor, studied law and purportedly held a &ldquo;prestigious position&rdquo; in the nation&rsquo;s capital (Reitman 2013).</p>

<p class="text">But then Anzor Tsarnaev was fired from his job in Kyrgyztan due to his ethnic identity, an event that precipitated the family&rsquo;s move to the US and their subsequent economic crisis. The family very quickly went from middle class to requiring public assistance. Both global and radical homesickness seem to have been present in their Boston house, and Reitman even alludes to Dzhokhar Tsarnaev&rsquo;s homesickness while at UMass Dartmouth: &ldquo;he was homesick. He suffered insomnia. He had repeated zombie dreams. And he missed his dad.&rdquo; The point here is not to ascertain clear motives for his actions, but instead to try to theorize the feelings he suffered, which may have influenced his horrifying decisions. What could have started as global homesickness transformed into a radical homesickness, catalyzed by a host of problems that ranged from leaving his home for a dormitory to his forced separation from his entire family. The disappearance of stable supports was surely a significant shock, concealed by his calm demeanor.
</p>

<p class="text">While they offer only hints of homesickness, it may be fruitful to decipher Dzhokhar&rsquo;s tweets, such as this example from 14 March 2012: &ldquo;a decade in america already, i want out.&rdquo; A definitive explanation of precise motives, decisions, and feeling may be impossible to ascertain, but that does not mean that the police, researchers, psychologists, critics, and the general public should give up this analysis. Multiple references to a lack of a &ldquo;stable home,&rdquo; and their search for a new home in Boston, should continue to be the foci of investigations—as it should be for many cases of domestic and international violence. What can we learn from this mixture of hope and disaffection, from the possibility that comes with asylum, further complicated by the effects of displacement and exile? What level of assistance do new arrivals need to establish well-being? What level of privacy should we guarantee for new arrivals?</p>

<p class="text">As a start, one thing that must be done is to improve our understanding and treatment of mental health issues, especially of radicalized emotions due to intellectual or physical displacement. I believe that it is not enough to understand globalization by studying patterns of consumption or market flows. Such studies take our minds off how we orient ourselves to home and, consequently, to one other. If we want to stop such outrageously unethical decisions to destroy and kill, and to understand the catalysts that inform such decisions, then we must pay more attention to how we <em>feel</em> globalization, not just how we feel <em>about</em> globalization.</p>

<div class="bibliography">
<p class="heading1">Works Cited</p>
<p>Bauman, Zygmunt. <em>Does Ethics Have a Chance in a World of Consumers</em>? Cambridge, MA: Harvard UP, 2008. 17-30. Print.</p>
  
<p>Daley, Suzanne. &ldquo;Roissy Journal; 11 Years Caged in an Airport; Now He Fears to Fly.&rdquo; <em>New York Times</em> 27 Sept. 1999. Web. New York Times. 2 July 2013.</p>
  
<p>Friedman, Thomas. <em>The World Is Flat 3.0: A Brief History of the Twenty-first Century</em>. New York: Picador, 2007. Print.</p>
  
<p>Lukács, Georg<em>. The Theory of the Novel: A Historico-Philosophical Essay on the Forms of Great Epic Literature</em>. (1920) Trans. Anna Bostock. Cambridge, MA: The MIT P, 1971. Print.</p>

<p>Merhan, Sir Alfred and Andrew Donkin. <em>The Terminal Man</em>. London: Corgi, 2004. Print.</p>

<p>Nussbaum, Martha C. <em>Upheavals of Thought: The Intelligence of Emotions</em>. Cambridge, Cambridge UP, 2001. Print.</p>

<p>Reitman, Janet. &ldquo;Jahar&rsquo;s World.&rdquo;  <em>Rolling Stone</em>. Rolling Stone. 17 July 2013. Web. 28 July 2013.</p>

<p>Saptrapi, Marjane. <em>The Complete Persepolis</em>. New York: Pantheon, 2007. Print.</p>

<p>Sassen, Saskai. <em>Territory, Authority, Rights: From Medieval to Global Assemblages</em>. Princeton, NJ: Princeton UP, 2008. Print.</p>

<p>Sedaris, David. &ldquo;Long Way Home.&rdquo; <em>New Yorker</em> 1 Apr. 2013. 28-31. Print.</p>


<p>Steger, Manfred B. Globalization: A Very Short Introduction. Oxford: Oxford UP, 2009. Print.</p>
<p>———<em>The Rise of the Global Imaginary: Political Ideologies from the French Revolution to the Global War on Terror</em>. Oxford: Oxford UP, 2008. Print.</p>

<p>Tsarnaev, Dzhokhar (J_tsar). &ldquo;a decade in america already, i want out.&rdquo; 14 Mar. 2012. 3:32 a.m. Tweet.</p>
</div>
</div>
</div>
<!-- END ARTICLE BODY -->
</body>
</html>